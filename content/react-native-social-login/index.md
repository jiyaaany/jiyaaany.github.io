---
emoji: ğŸ’¬
title: RN ì†Œì…œ ë¡œê·¸ì¸ ëª¨ë‘ íŒŒí—¤ì³ ë³´ì ! ğŸ‘€
date: '2021-10-17 22:29:00'
author: ì§€ê±¸
tags: react-native typescript
categories: experience
---
# ì‹œì‘í•˜ë©°
[ê·¼ìœ¡ë§¨](https://github.com/jiyaaany/muscleman) ì´ë¼ëŠ” ëª¨ë°”ì¼ ì–´í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©° ê°œë°œ ì–¸ì–´ë¡œ **[React Native](https://reactnative.dev/)** ë¥¼ ì±„íƒí–ˆê³ , ì†Œì…œ ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê²Œ ë˜ì—ˆë‹¤.
>[ì‚¬ì „ ì¤€ë¹„]  
RN >= 0.60 (RN <= 0.59ì˜ ê²½ìš° íŒ¨í‚¤ì§€ ì„¤ì¹˜ë²•ì´ ìƒì´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

# ì¹´ì¹´ì˜¤
## ì• í”Œë¦¬ì¼€ì´ì…˜(í”„ë¡œì íŠ¸) ì¶”ê°€
1. ë¨¼ì € [Kakao Developers](https://developers.kakao.com/) ì‚¬ì´íŠ¸ì— ì ‘ì†í•´ **ë‚´ ì• í”Œë¦¬ì¼€ì´ì…˜** ë©”ë‰´ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¶”ê°€ë¥¼ í•´ì¤ë‹ˆë‹¤.
![](https://images.velog.io/images/jiyaaany/post/827afc82-7c66-46e3-b681-3df37ac7d10f/image.png)
1-1. ì•± ì´ë¦„, ì‚¬ì—…ìëª… ì…ë ¥ ì‹œ ê°„ë‹¨íˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
![](https://images.velog.io/images/jiyaaany/post/4c45871b-1d93-45f3-975b-248f6f8620d4/image.png)
2. ê¸°ë³¸ê°’ìœ¼ë¡œ ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ì´ ë¹„í™œì„±í™” ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ì• í”Œë¦¬ì¼€ì´ì…˜ > ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ë©”ë‰´ì—ì„œ í™œì„±í™” ì‹œì¼œì¤ë‹ˆë‹¤.
![img.png](img.png)
3. ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í™œì„±í™” ë¶€ë¶„ í•˜ë‹¨ì— ìˆëŠ” Redirect URIë¥¼ ì„¤ì •í•´ì¤ë‹ˆë‹¤. ê³µì‹ ë¬¸ì„œì—ì„œëŠ” ì•„ë˜ ë‘ê°€ì§€ì˜ ê·œì¹™ì„ ì§€ì¼œ Redirect URIë¥¼ ì„¤ì •í•´ì•¼ í•œë‹¤ê³  ê°€ì´ë“œí•˜ê³  ìˆìŠµë‹ˆë‹¤.
- Redirect URIëŠ” HTTP/HTTPS í”„ë¡œí† ì½œ ë° 80, 443 í¬íŠ¸ë¥¼ í—ˆìš©í•©ë‹ˆë‹¤.
- Redirect URIëŠ” HTTP/HTTPS í”„ë¡œí† ì½œì„ êµ¬ë¶„í•˜ë¯€ë¡œ ê°ê° ë“±ë¡í•´ì•¼ í•©ë‹ˆë‹¤.
![img_1.png](img_1.png)
4. ì• í”Œë¦¬ì¼€ì´ì…˜ > ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ > ë™ì˜í•­ëª© ë©”ë‰´ì— ì ‘ì†í•˜ì—¬ ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì‹œ ì œê³µ ë°›ì„ ë°ì´í„°ë“¤ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ ê°œì¸ì •ë³´ í…Œì´ë¸”ì—ì„œ ì œê³µë°›ì„ í•­ëª©ì„ ì„¤ì •í•˜ê³  ìš°ì¸¡ ìƒë‹¨ì˜ **ë™ì˜ í™”ë©´ ë¯¸ë¦¬ë³´ê¸°** ë²„íŠ¼ì„ í†µí•´ ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì‹œ ë…¸ì¶œë˜ëŠ” ëª¨ë‹¬ì„ í™•ì¸í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
![img_2.png](img_2.png)

## íŒ¨í‚¤ì§€ ì„¤ì¹˜
ì €ëŠ” [React Native ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ íŒ¨í‚¤ì§€](https://github.com/react-native-seoul/react-native-kakao-login) ë¥¼ ì‚¬ìš©í•´ ì—°ë™ì„ ì§„í–‰í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.
```
yarn add @react-native-seoul/kakao-login
```
iOSì˜ ê²½ìš° ì•„ë˜ ëª…ë ¹ì–´ë¡œ pod ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ê°€ ë³„ë„ë¡œ í•„ìš”í•©ë‹ˆë‹¤.
```
npx pod-install
```
## iOS ì„¸íŒ…
### ì„¤ì • íŒŒì¼ ë³€ê²½
ë¨¼ì € `ios` ë””ë ‰í† ë¦¬ í•˜ìœ„ì˜ `info.plist` ì„¤ì •íŒŒì¼ì„ ìˆ˜ì •í•´ì¤ë‹ˆë‹¤.
```xml
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleTypeRole</key>
        <string>Editor</string>
        <key>CFBundleURLSchemes</key>
        <array>
          <string>kakao{ì•± ì•„ì´ë””}</string>
        </array>
    </dict>
</array>

<key>KAKAO_APP_KEY</key>
<string>{ì•± ì•„ì´ë””}</string>
<key>LSApplicationQueriesSchemes</key>
<array>
    <string>kakaokompassauth</string>
    <string>storykompassauth</string>
    <string>kakaolink</string>
</array>
```

### [Swift Bridging Header](https://stackoverflow.com/questions/31716413/xcode-not-automatically-creating-bridging-header) ì¶”ê°€
[íŒ¨í‚¤ì§€ ê³µì‹ë¬¸ì„œ](https://github.com/react-native-seoul/react-native-kakao-login) `README.MD`ì— ì†Œê°œëœ ê²ƒì²˜ëŸ¼ ìœ„ ë§í¬ë¥¼ í†µí•´ `Swift Bridging Header`ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
ë¨¼ì € Xcodeì—ì„œ `í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬/ios` ê²½ë¡œë¥¼ ì—´ì–´ì¤ë‹ˆë‹¤. (ë¡œë”©í•˜ëŠ”ë° í•œ ì„¸ì›” ê±¸ë¦¼..)

### `AppDelegate.m`
ë‹¤ìŒìœ¼ë¡  ì¹´ì¹´ì˜¤í†¡ ì•±ì´ ê¹”ë ¤ìˆì„ ê²½ìš° ì˜¬ë°”ë¥¸ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ê¸° ìœ„í•´ `AppDelegate.m` íŒŒì¼ì— ì•„ë˜ ë‚´ìš©ì„ ì¶”ê°€í•´ì¤ë‹ˆë‹¤. 
```
// import
#import <RNKakaoLogins.h>

// openURL í•¨ìˆ˜ ì¶”ê°€
- (BOOL)application:(UIApplication *)app
     openURL:(NSURL *)url
     options:(NSDictionary<UIApplicationOpenURLOptionsKey,id> *)options {
 if([RNKakaoLogins isKakaoTalkLoginUrl:url]) {
    return [RNKakaoLogins handleOpenUrl: url];
 }

 return NO;
}

dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(void){
      dispatch_async(dispatch_get_main_queue(), ^(void){
        if ([RNKakaoLogins isKakaoTalkLoginUrl:url]) {
          [RNKakaoLogins handleOpenUrl: url];
        }
      });
  });
```

### Bundle Identifier í™•ì¸
Xcodeì—ì„œ Project => Targets ì•„ë˜ ì„ íƒ í›„ General íƒ­ìœ¼ë¡œ ì´ë™í•˜ì—¬ Bundle Identifierê°€ ë³¸ì¸ì˜ ì¹´ì¹´ì˜¤ ì•±ê³¼ ë™ì¼í•œì§€ í™•ì¸í•©ë‹ˆë‹¤.
![img_4.png](img_4.png)

## Android
### í‚¤ í•´ì‹œ(Key Hash) ë“±ë¡
[ë§í¬](https://developers.kakao.com/docs/latest/ko/getting-started/sdk-android-v1#key-hash) ë¥¼ í†µí•´ í‚¤ í•´ì‹œë“±ë¡ì„ ì§„í–‰í•©ë‹ˆë‹¤. ë””ë²„ê·¸, ë¦´ë¦¬ì¦ˆ í‚¤ í•´ì‹œ ê°’ì„ ë“±ë¡í•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
1. ìš´ì˜ì²´ì œì— ë”°ë¥¸ ëª…ë ¹ì–´ë¥¼ í†µí•´ í‚¤ í•´ì‹œë¥¼ ìƒì„±
2. [ë‚´ ì• í”Œë¦¬ì¼€ì´ì…˜] > [í”Œë«í¼] > [Android í”Œë«í¼ ë“±ë¡]
3. [í‚¤ í•´ì‹œ] í•­ëª©ì—ì„œ ìƒì„±í•œ í‚¤ í•´ì‹œë¥¼ ì…ë ¥ í›„ ì €ì¥  
![img_3.png](img_3.png)

#### ë””ë²„ê·¸ í‚¤ í•´ì‹œ
```
keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore -storepass android -keypass android | openssl sha1 -binary | openssl base64
```
React Native 0.60.x ë¶€í„° ê¸°ë³¸ì ìœ¼ë¡œ ë””ë²„ê¹… í‚¤ í•´ì‹œê°€ í¬í•¨ë©ë‹ˆë‹¤. `{PROJECT_DIR}/android/app` ê²½ë¡œì— `debug.keystore` íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤. ì•„ë˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ í‚¤ í•´ì‹œ ê°’ì„ ì¶”ì¶œí•˜ê³  ì¹´ì¹´ì˜¤ ê°œë°œì ì‚¬ì´íŠ¸ì— ë“±ë¡í•´ì¤ë‹ˆë‹¤.
```
keytool -exportcert -alias androiddebugkey -keystore ~./android/app/debug.keystore -storepass android -keypass android | openssl sha1 -binary | openssl base64
```

#### ë¦´ë¦¬ì¦ˆ í‚¤ í•´ì‹œ
```
keytool -exportcert -alias <RELEASE_KEY_ALIAS> -keystore <RELEASE_KEY_PATH> | openssl sha1 -binary | openssl base64
```

### Manifest íŒŒì¼ ìˆ˜ì •
`android/app/src/main/AndroidManifest.xml` íŒŒì¼ì—ì„œ `allowBackup`ì„ `true`ë¡œ ë³€ê²½í•´ì¤ë‹ˆë‹¤.
```
...
android:allowBackup="true"
...
```

### Redirect URI ì„¤ì •
`android/app/src/main/AndroidManifest.xml`
```
<activity android:name="com.kakao.sdk.auth.AuthCodeHandlerActivity">
  <intent-filter>
      <action android:name="android.intent.action.VIEW" />
      <category android:name="android.intent.category.DEFAULT" />
      <category android:name="android.intent.category.BROWSABLE" />

      <!-- Redirect URI: "kakao{NATIVE_APP_KEY}://oauthâ€œ -->
      <data android:host="oauth"
          android:scheme="kakao{ì¹´ì¹´ì˜¤ ë„¤ì´í‹°ë¸Œ ì•± key}" />
  </intent-filter>
</activity>
```

### `strings.xml` íŒŒì¼ ìˆ˜ì •
```
<string name="kakao_app_key">{ì¹´ì¹´ì˜¤ ë„¤ì´í‹°ë¸Œ ì•± key}</string>
```

### kotlinì„ í•´ì„ê°€ëŠ¥í•˜ë„ë¡ ìˆ˜ì •
`android/build.gradle` íŒŒì¼ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•©ë‹ˆë‹¤.
```
 buildscript {
   ext {
     ...
     kotlinVersion = '1.3.41'
   }
   dependencies {
     ...
     classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion"
   }
 }
```

# êµ¬ê¸€
## ì• í”Œë¦¬ì¼€ì´ì…˜(í”„ë¡œì íŠ¸) ì¶”ê°€
êµ¬ê¸€ë„ ë§ˆì°¬ê°€ì§€ë¡œ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
![](https://images.velog.io/images/jiyaaany/post/8b093780-b576-48a3-9db4-0c2256337e5c/image.png)

## íŒ¨í‚¤ì§€ ì„¤ì¹˜
[google-signin](https://github.com/react-native-google-signin/google-signin) íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.
```
yarn add @react-native-google-signin/google-signin
```
